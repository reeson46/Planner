{% load static %}
<link rel="stylesheet" href="{% static 'dashboard/sidebar/css/sidebar.css' %}">


<ul class="sidebar-nav">
  <div class="text-white fs-4 text-center mt-2 new-task-text">New Task</div>
  <div class="container" id="sidebar-new-task">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="orange" class="bi bi-plus-square newtask-icon"
      viewBox="0 0 16 16">
      <path
        d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" />
      <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
    </svg>
  </div>

  <div id="board-wrapper">
    <div class="container mb-2 mt-2">
      <li class="row">
        <span class="d-flex justify-content-between">
          <div class="fs-4 text-white">
            Boards
          </div>
          {% if user.is_authenticated %}
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="orange"
            class="bi bi-plus-square rename-add-icon sidebar-add-icon" data-sender="board" data-action="add"
            data-placeholder="Enter Board name" data-value="" data-id="" viewBox="0 0 16 16">
            <path
              d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" />
            <path
              d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
          </svg>
          {% endif %}
        </span>
      </li>
    </div>
    <div id="sidebar-boards">
      {% for board in boards %}
      <li class="row hovered-nav-item board-item" value="{{ board.id }}">
        <span class="d-flex justify-content-between">
          <div class="fs-5 text-white board-name" value="{{ board.id }}">
            {{ board.name }}
          </div>
          <div class="dropdown sidebar-dropdown d-flex">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="bi bi-three-dots-vertical dot-icon"
              type="button" id="dropdownMenuButton{{ board.id }}" data-bs-toggle="dropdown" aria-expanded="false"
              viewBox="0 0 16 16">
              <path
                d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" />
            </svg>

            <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="dropdownMenuButton{{ board.id }}">
              <li class="d-flex">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-pen-fill rename-add-icon rename-add-icon-sidebar" data-bs-placement="top"
                  data-sender="board" data-action="rename" data-placeholder="" data-value="{{ board.name }}"
                  data-id="{{ board.id }}" viewBox="0 0 16 16">
                  <path
                    d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001z" />
                </svg>
              </li>

              {% if boards|length > 1 %}
              <li class="d-flex">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="orange"
                  class="bi bi-x-lg delete-icon" data-sender="board" data-action="delete" data-id="{{ board.id }}"
                  viewBox="0 0 16 16">
                  <path
                    d="M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z" />
                </svg>
              </li>
              {% endif %}
            </ul>
          </div>
        </span>
      </li>
      {% endfor %}
    </div>
  </div>

  <br>

  <div id="category-wrapper">
    <div class="container mt-2">
      <li class="row">
        <span class="d-flex justify-content-between">
          <div class="fs-4 text-white">
            Categories
          </div>
          {% if user.is_authenticated %}
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="orange"
            class="bi bi-plus-square rename-add-icon sidebar-add-icon" data-sender="category" data-action="add"
            data-placeholder="Enter Category name" data-value="" data-id="" data-source="sidebar" viewBox="0 0 16 16">
            <path
              d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" />
            <path
              d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
          </svg>
          {% endif %}
        </span>
      </li>
      <li class="row{% if user.is_authenticated %} hovered-nav-item active-category {% endif %}" value="-1">
        {% if user.is_authenticated %}
        <span class="category-link category-item fs-5 text-white d-flex " id="sidebar-all-tasks" value="-1">

          All

          {% if total_tasks|length > 0 %}
          <div class="total-number">
            <div class="number">{{ total_tasks|length }}</div>
          </div>
          {% endif %}
        </span>
        {% endif %}
      </li>
    </div>
    <div class="container" id="sidebar-categories">
      {% for category in categories %}
      <li class="row hovered-nav-item">
        <span class="d-flex justify-content-between active-category" value="{{ category.id }}">
          <div class="category-item">
            <span class="category-link fs-5 text-white total-tasks-number d-flex" value="{{ category.id }}">
              <div class="category-name" value="{{ category.id }}">
                {{ category.name }}
              </div>
            </span>
          </div>
          <div class="dropdown d-flex">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="bi bi-three-dots-vertical dot-icon"
              type="button" id="dropdownMenuButton{{ category.id }}" data-bs-toggle="dropdown" aria-expanded="false"
              viewBox="0 0 16 16">
              <path
                d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" />
            </svg>

            <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="dropdownMenuButton{{ category.id }}">
              <li class="d-flex">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-pen-fill bs-icon rename-add-icon rename-add-icon-sidebar" data-bs-placement="top"
                  data-sender="category" data-sender="sidebar" data-action="rename" data-placeholder=""
                  data-value="{{ category.name }}" data-id="{{ category.id }}" viewBox="0 0 16 16">
                  <path
                    d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001z" />
                </svg>
              </li>
              <li class="d-flex">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="orange"
                  class="bi bi-x-lg delete-icon" data-sender="category" data-action="delete" data-id="{{ category.id }}"
                  viewBox="0 0 16 16">
                  <path
                    d="M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z" />
                </svg>
              </li>
            </ul>
          </div>
        </span>
      </li>
      {% endfor %}
    </div>
  </div>
  <div class="container mt-2">
    {% if user.is_authenticated %}
    <p class="text-white">Hello, {{user.user_name }}</p>
    <br>
    <a href="{% url 'account:logout' %}">Logout</a>
    {% else %}
    <a href="{% url 'account:login' %}">Login</a>
    or
    <a href="{% url 'account:register' %}">Register</a>

    {% endif %}
  </div>

</ul>

<script>
  var SET_ACTIVE_BOARD_URL = '{% url "dashboard:set_active_board" %}';
  var SET_ACTIVE_CATEGORY_URL = '{% url "dashboard:set_active_category" %}';
  var CSRF_TOKEN = '{{ csrf_token }}';
  var HIGHLIGHTED_BOARD = '{{ highlighted_board }}';
  var HIGHLIGHTED_CATEGORY = '{{ highlighted_category }}';
  var TOTAL_TASKS_PER_CATEGORY = '{{ total_tasks_per_category }}';
</script>
<script src="{% static 'dashboard/sidebar/js/sidebar.js' %}" data-rel-js></script>